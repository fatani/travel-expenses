# Travel Expenses Tracker

ุชุทุจูู Flutter ูุชุชุจุน ูุตุงุฑูู ุงูุณูุฑ ูุน ุฏุนู ูุงูู ููุบุฉ ุงูุนุฑุจูุฉ RTL.

## ๐ ุชุดุบูู ุณุฑูุน

```bash
# 1. ุชูุฒูู ุงูููุชุจุงุช
flutter pub get

# 2. ุชุดุบูู ุนูู ุงูููุจ
flutter run -d chrome --web-port=53111

# 3. ุชุดุบูู ุงูุงุฎุชุจุงุฑุงุช
flutter test

# 4. ุชุญููู ุงูููุฏ
flutter analyze
```

## What it does
- ุชุชุจุน ูุตุงุฑูู ุงูุณูุฑ ููู ุฑุญูุฉ ุจุนููุฉ ูุญุฏุฏุฉ
- ูุนูู ุฏูู ุงุชุตุงู ูุน ุชุตุฏูุฑ CSV ููุจูุงูุงุช
- ูุงุฌูุฉ ุนุฑุจูุฉ RTL ูุน ุฃุฏูุงุช ุฅุฏุฎุงู ุฐููุฉ

## Data & Privacy
- ูู ุงูุจูุงูุงุช ุชูุฎุฒูู ูุญูููุง ุนูู ุงูุฌูุงุฒ
- ูุง ููุฌุฏ ุชุณุฌูู ุฏุฎูู
- ูุง ููุฌุฏ ุฅุฑุณุงู ุจูุงูุงุช ูุณูุฑูุฑ

## Platforms
- iOS
- Android
- Web (PWA)

## ๐ฑ ูุตู ุงูุชุทุจูู

ุชุทุจูู ูุชุชุจุน ูุตุงุฑูู ุงูุณูุฑ ููู ุฑุญูุฉุ ูุนูู ุฏูู ุงุชุตุงู ููุชูุญ ุชุตุฏูุฑ CSV.

## ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### 1. ุฅุฏุงุฑุฉ ุงูุฑุญูุงุช
- ุฅูุดุงุก ูุชุนุฏูู ุฑุญูุงุช ุงูุณูุฑ
- ุชุญุฏูุฏ ุนููุฉ ุฃุณุงุณูุฉ ููู ุฑุญูุฉ
- ุนุฑุถ ููุฎุต ุงููุตุงุฑูู ุญุณุจ ุงููุฆุฉ

### 2. ุชุณุฌูู ุงููุตุงุฑูู ุงูุฐูู

#### **ุงุณุชุฎุฑุงุฌ ุงูุจูุงูุงุช ูู ุฑุณุงุฆู SMS ุงูุจูููุฉ** โจ ุฌุฏูุฏ
- ุงูุตู ูุต ุฑุณุงูุฉ ุงูุจูู (SMS/WhatsApp) ูุจุงุดุฑุฉ ูู ูููุฐุฌ ุงููุตุฑูู
- ุงุณุชุฎุฑุงุฌ ุชููุงุฆู ููุญููู ุงูุชุงููุฉ:
  - **ุงููุจูุบ**: ูุฏุนู ุงูุฃุฑูุงู ุงูุนุฑุจูุฉ (ู-ูฉ) ูุงูุฅูุฌููุฒูุฉ
  - **ุงูุนููุฉ**: SAR, USD, EUR, GBP, ูุบูุฑูุง
  - **ููุงู ุงูุดุฑุงุก**: ุงุณู ุงููุชุฌุฑ/ุงูุดุฑูุฉ
  - **ุงูุชุงุฑูุฎ ูุงูููุช**: ุชูุณููุงุช ูุชุนุฏุฏุฉ (dd/MM/yy, dd-MM-yyyy)
  - **ุทุฑููุฉ ุงูุฏูุน**: ุจุทุงูุฉุ ูุญูุธุฉ ุฑูููุฉุ ููุฏ
  - **ููุน ุงูุจุทุงูุฉ**: Visa, Mastercard, Mada, Apple Pay
  - **ุงุณู ุงูุจุทุงูุฉ**: ูุซู "ูุฑุณุงู"ุ "ุงูุฑุงุฌุญู"

**ุชูุณููุงุช ุงูุฑุณุงุฆู ุงููุฏุนููุฉ:**
- ุฑุณุงุฆู ุงููุดุชุฑูุงุช ุงูุนุฑุจูุฉ (POS)
- ุฑุณุงุฆู ุงูุดุฑุงุก ุงูุฅููุชุฑููู (Apple Pay)
- ุฑุณุงุฆู ุงูุจููู ุงูุฅูุฌููุฒูุฉ

**ูุซุงู:**
```
ูุงูุช ุจุทุงูุฉ ุงูุฃุนูุงู ูุฑุณุงู
ูุดุชุฑูุงุช ูุจุงุดุฑุฉ ูู ุดุฑูุฉ ูุฑูู Mastercard x-1234
ูุจูุบ: 44.99 SAR ูู 22/12/24 ุงูุณุงุนุฉ 19:54
```
ุณูุชู ุงุณุชุฎุฑุงุฌ: 44.99 SAR ูู ูุฑูู ูุน ูุนูููุงุช Mastercard ุชููุงุฆูุงู โ

#### ุญูุงูุฉ ุงููุณูุฏุงุช
- ุญูุธ ุชููุงุฆู ููุจูุงูุงุช ุฃุซูุงุก ุงููุชุงุจุฉ
- ูุงูุฐุฉ ุชุฃููุฏ ุนูุฏ ูุญุงููุฉ ุงูุฎุฑูุฌ ูู ูููุฐุฌ ุบูุฑ ูุญููุธ
- ุงุณุชุนุงุฏุฉ ุงููุณูุฏุฉ ุนูุฏ ุงูุนูุฏุฉ ูููููุฐุฌ
- ุนุฒู ุงููุณูุฏุงุช ุญุณุจ ุงูุฑุญูุฉ (ููู ุฑุญูุฉ ูุณูุฏุชูุง ุงูุฎุงุตุฉ)

#### ุงูุชุฑุงุญุงุช OCR ููุฅูุตุงูุงุช (ุชุฌุฑูุจู)
- ุงุฎุชูุงุฑ ุตูุฑุฉ ุฅูุตุงู ูู ุงููุนุฑุถ
- ุงูุชุฑุงุญุงุช ูุญุฏุฏุฉ ูุณุจูุงู ุจูุงุกู ุนูู ุงูุฅูุตุงู ุงููุญุฏุฏ
- ุชุทุจูู ุงูุงูุชุฑุงุญุงุช ุจููุฑุฉ ูุงุญุฏุฉ

### 3. ุฅุฏุงุฑุฉ ุงูุฅูุตุงูุงุช
- ุงูุชูุงุท ุตูุฑ ุงูุฅูุตุงูุงุช ูุจุงุดุฑุฉ
- ุชุญููู ุฅูุตุงูุงุช ูู ุงููุนุฑุถ
- ุฑุจุท ุฅูุตุงูุงุช ูุชุนุฏุฏุฉ ุจูู ูุตุฑูู

### 4. ุชุตุฏูุฑ ุงูุจูุงูุงุช
- ุชุตุฏูุฑ ุฌููุน ูุตุงุฑูู ุงูุฑุญูุฉ ุฅูู ููู CSV
- ุชูุณููุงุช ุชูุงุฑูุฎ ูุชุนุฏุฏุฉ
- ููุงุตู CSV ูุงุจูุฉ ููุชุฎุตูุต

## ุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ
- **Flutter**: SDK 3.29.2
- **Riverpod**: ุฅุฏุงุฑุฉ ุงูุญุงูุฉ
- **Drift**: ูุงุนุฏุฉ ุจูุงูุงุช ูุญููุฉ (SQLite + web support)
- **Image Picker**: ุงูุชูุงุท ุงูุตูุฑ
- **CSV**: ุชุตุฏูุฑ ุงูุจูุงูุงุช

## ุงูุงุฎุชุจุงุฑุงุช

ุงููุดุฑูุน ูุญุชูู ุนูู ุชุบุทูุฉ ุดุงููุฉ ุจุงูุงุฎุชุจุงุฑุงุช:
- ุงุฎุชุจุงุฑุงุช ูุญุฏุฉ ููุญูู SMS (10 ุงุฎุชุจุงุฑุงุช)
- ุงุฎุชุจุงุฑุงุช ูุฒูุฏุงุช Riverpod (expense drafts, filters)
- ุงุฎุชุจุงุฑุงุช ูุงุนุฏุฉ ุงูุจูุงูุงุช
- ุงุฎุชุจุงุฑุงุช ุฎุฏูุงุช (CSV export, trip summary)

```bash
flutter test                     # ุฌููุน ุงูุงุฎุชุจุงุฑุงุช (54 ุงุฎุชุจุงุฑ)
flutter test test/sms_*          # ุงุฎุชุจุงุฑุงุช ูุญูู SMS ููุท
flutter test test/expense_draft* # ุงุฎุชุจุงุฑุงุช ุงููุณูุฏุงุช ููุท
```

## ๐ฆ ุฎุทูุงุช ุงูุฅุทูุงู (Release)

### ุชุญุถูุฑ ุงูุจูุฆุฉ
```bash
# ุชุฃูุฏ ูู ูุธุงูุฉ ุงููุดุฑูุน
flutter clean
flutter pub get

# ุชุญูู ูู ุงูุฌูุฏุฉ ูุจู ุงูุฅุทูุงู
flutter analyze
flutter test
```

### Web/PWA

#### ุงูุจูุงุก
```bash
flutter build web --release
```

#### ุงูุงุฎุชุจุงุฑ ุงููุญูู
```bash
# ุชุซุจูุช ุฎุงุฏู ุซุงุจุช (ุฅุฐุง ูู ููู ูุซุจุชุงู)
dart pub global activate dhttpd

# ุชุดุบูู ุงูุฎุงุฏู ูู ูุฌูุฏ build
dhttpd --path build/web --port 53111
```
ุซู ุงูุชุญ: `http://localhost:53111`

#### ุงูุชุญูู ูู PWA
- โ ูุนูู ุจุฏูู ุงุชุตุงู (offline)
- โ ุงูุชุซุจูุช ูุชุทุจูู ูุนูู
- โ ูุง ุชูุฌุฏ ุฃุฎุทุงุก console ูุฎููุฉ
- โ ุฌููุน ุงููุณุงุฑุงุช ุชุนูู (Trip list โ Details โ Add expense)

**ุงููููุงุช ุงููููุฉ:**
- `web/manifest.json` โ PWA metadata
- `web/index.html` โ entry point
- `build/web/flutter_service_worker.js` โ caching

### Android

#### ุงูุจูุงุก

```bash
# ุจูุงุก APK (ููุงุฎุชุจุงุฑ/ุงูุชูุฒูุน ุงููุจุงุดุฑ)
flutter build apk --release

# ุจูุงุก App Bundle (ูู Google Play Store)
flutter build appbundle --release
```

**ุงููุฎุฑุฌุงุช:**
- APK: `build/app/outputs/flutter-apk/app-release.apk`
- AAB: `build/app/outputs/bundle/release/app-release.aab`

#### ุฅุนุฏุงุฏ ุงูุชูููุน (Signing)
ูุจู ุงููุดุฑ ุนูู Google Play:
1. ุฅูุดุงุก keystore:
```bash
keytool -genkey -v -keystore ~/key.jks -keyalg RSA -keysize 2048 -validity 10000 -alias upload
```

2. ุฅูุดุงุก ููู `android/key.properties`:
```properties
storePassword=your_store_password
keyPassword=your_key_password
keyAlias=upload
storeFile=../key.jks
```

3. ุชุญุฏูุซ `android/app/build.gradle` ูุงุณุชุฎุฏุงู ุงูุชูููุน ููุฅุตุฏุงุฑุงุช

#### ุงููููุงุช ุงููููุฉ
- `android/app/src/main/AndroidManifest.xml` โ ุงุณู ุงูุชุทุจูู: "ูุตุงุฑูู ุงูุณูุฑ"
- `android/app/build.gradle` โ ุฅุตุฏุงุฑ ุงูุชุทุจูู ูุงูุฎุตุงุฆุต

### iOS

#### ุงูุจูุงุก ุจุฏูู ุชูููุน
```bash
flutter build ios --release --no-codesign
```

#### ุงูุจูุงุก ูุน ุงูุชูููุน ูุงูุฃุฑุดูุฉ (ูุงุญูุงู)
```bash
# ูู Xcode
open ios/Runner.xcworkspace
# Product > Archive โ Export
```

#### ุงููููุงุช ุงููููุฉ
- `ios/Runner/Info.plist` โ ุงุณู ุงูุชุทุจูู: "ูุตุงุฑูู ุงูุณูุฑ"
- `ios/Podfile` โ dependencies

### ๐ Release Checklist

**ูุจู ุงูุฅุทูุงู:**
- [ ] ุชุดุบูู `flutter analyze` โ 0 ุฃุฎุทุงุก ุญุฑุฌุฉ
- [ ] ุชุดุบูู `flutter test` โ 75/75 ุงุฎุชุจุงุฑ โ
- [ ] ุชุญุฏูุซ `pubspec.yaml` version ุฅุฐุง ูุฒู ุงูุฃูุฑ

**Web/PWA:**
- [ ] `flutter build web --release` โ
- [ ] ุงุฎุชุจุงุฑ ุนูู localhost โ ุงูููุจ ูุนูู ุจุฏูู ุงุชุตุงู โ
- [ ] PWA install ูุนูู
- [ ] ูุง ุชูุฌุฏ console errors

**Android:**
- [ ] `flutter build apk --release` โ
- [ ] (ุงุฎุชูุงุฑู) ุงุฎุชุจุงุฑ APK ุนูู ุงูุฌูุงุฒ/ูุญุงูู
- [ ] `flutter build appbundle --release` โ
- [ ] ุชูููุน ูุฅุนุฏุงุฏ Google Play (ูุงุญูุงู)

**iOS:**
- [ ] `flutter build ios --release --no-codesign` โ
- [ ] ูุชุญ Xcode ูุชุฃููุฏ ุงูุจูุงุก
- [ ] ุฅุนุฏุงุฏ AppStore Connect (ูุงุญูุงู)

**Meta/Config:**
- [ ] [x] ุงุณู ุงูุชุทุจูู ูุญุฏุซ: "ูุตุงุฑูู ุงูุณูุฑ"
- [ ] [x] ุงูุฅุตุฏุงุฑ ุตุญูุญ: 0.1.0
- [ ] [x] ุงูุฃููููุงุช ููุฌูุฏุฉ ุนูู ุฌููุน ุงูููุตุงุช

### ๐ ูุดุฑ ุนูู ุงููุชุงุฌุฑ (ุฎุทูุงุช ูุณุชูุจููุฉ)

**Google Play Console:**
1. ุฅูุดุงุก ุญุณุงุจ Google Play Developer
2. ุชุญููู AAB ูุน ุงูุฃููููุงุช ูุงููุตู
3. ุฅุนุฏุงุฏ ูู-play testing
4. ุงููุดุฑ ุฅูู ุงูุฅูุชุงุฌ

**App Store Connect:**
1. ุฅูุดุงุก ุญุณุงุจ Apple Developer
2. ุชูููุน ุงูุจูุงุก ูุน ูุนุฑู ุงููุฑูู
3. ุชุญููู ุงูุฃุฑุดูู ุจุงุณุชุฎุฏุงู Transporter
4. ููุก ูุนูููุงุช ุงููุชุฌุฑ ูุงูููุงุฑุฏ
5. ุฅุฑุณุงู ูููุฑุงุฌุนุฉ

## ุงูุจููุฉ ุงููุนูุงุฑูุฉ

```
lib/
โโโ core/               # ููุงุฐุฌ ูููููุงุช ูุดุชุฑูุฉ
โ   โโโ db/            # ุฅุนุฏุงุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช (Drift)
โ   โโโ models/        # ููุงุฐุฌ ุงูุจูุงูุงุช ุงูุฑุฆูุณูุฉ
โ   โโโ widgets/       # ููููุงุช ูุงุฌูุฉ ูุดุชุฑูุฉ
โโโ features/          # ุงูููุฒุงุช ุญุณุจ ุงููุญุฏุงุช
โ   โโโ expenses/      # ุฅุฏุงุฑุฉ ุงููุตุงุฑูู
โ   โ   โโโ presentation/
โ   โ   โ   โโโ models/       # ExpenseDraft
โ   โ   โ   โโโ pages/        # AddEditExpensePage
โ   โ   โ   โโโ providers/    # Riverpod providers
โ   โ   โ   โโโ utils/        # sms_receipt_parser.dart โจ
โ   โ   โโโ repositories/
โ   โโโ receipts/      # ุฅุฏุงุฑุฉ ุงูุฅูุตุงูุงุช
โ   โโโ trips/         # ุฅุฏุงุฑุฉ ุงูุฑุญูุงุช
โโโ app/               # ุฅุนุฏุงุฏุงุช ุงูุชุทุจููุ ุงูุซููุ ุงูุชูุฌูู
```

## ููุงุญุธุงุช ุงูุชุทููุฑ

### ุงููููุฏ ุงูุญุงููุฉ
- ูุง ูุชู ุฅุฌุฑุงุก ุฃู migrations ููุงุนุฏุฉ ุงูุจูุงูุงุช
- ุฌููุน ุงูุญุงูุงุช ูู ุงูุฐุงูุฑุฉ ููุท (in-memory)
- ูุง ุชูุฌุฏ ููุชุจุงุช ุฅุถุงููุฉ ูููุญูู (pure Dart regex)
- ุงููุญูู ูุณุชุฎุฏู ุฃููุงุท regex ุจุณูุทุฉ (ููุณ ML/AI)

### ุงูุฃููุงุท ุงููุนูุงุฑูุฉ
- ุงุณุชุฎุฏุงู `family` providers ููุนุฒู ุญุณุจ ุงูุณูุงู (ูุซู draft per trip)
- ุงุณุชุฎุฏุงู `StateNotifier` ุจุฏูู `autoDispose` ููุญุงูุงุช ุงูุฏุงุฆูุฉ
- ููุงุฐุฌ immutable ูุน `copyWith`
- ุงุฎุชุจุงุฑุงุช ุนูู ูุณุชูู provider ุจุฏูุงู ูู widget tests ููุณุฑุนุฉ

## ุงูุฅุตุฏุงุฑุงุช ุงููุงุฏูุฉ
- [ ] ุฏุนู OCR ุญูููู ุจุงุณุชุฎุฏุงู ML
- [ ] ุชุนูู ุฃููุงุท SMS ุชููุงุฆูุงู
- [ ] ุฏุนู ุงููุฒูุฏ ูู ุงูุจููู ูุงูุนููุงุช
- [ ] ูุฒุงููุฉ ุนุจุฑ ุงูุฃุฌูุฒุฉ

## ุงูุชุฑุฎูุต

MIT License - ูุดุฑูุน ุชุนูููู

